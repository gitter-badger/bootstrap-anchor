/*!
 * Bootstrap Anchor v1.0.0 (http://markcarver.github.io/bootstrap-anchor/)
 * Copyright 2015 Mark Carver
 * Dual licensed under MIT/GLPv2 (https://github.com/markcarver/bootstrap-anchor/blob/master/LICENSE)
 */
+function(a){"use strict";function b(b){var d=a.extend([],arguments);return d.shift(),this.each(function(){var e=a(this),f=e.data("bs.anchor"),g="object"==typeof b&&b;f||e.data("bs.anchor",f=new c(this,g)),"string"==typeof b&&f[b].apply(f,d)})}var c=function(a,b){this.$anchor=null,this.dom=null,this.id=null,this.link=null,this.originalId=null,this.scrollTop=null,this.scrolling=null,this.init("anchor",a,b)};if(!a.fn.tooltip||!a.fn.tooltip.Constructor.VERSION||a.fn.tooltip.Constructor.VERSION<"3.3.4")throw new Error("Anchor requires tooltip.js, version 3.3.4 or greater.");c.VERSION="1.0.0",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{duration:300,exclude:'[data-anchor-ignore],[data-dismiss],[data-slide],[data-toggle]:not([data-toggle="anchor"])',generate:!0,generatePrefix:!1,history:"append",icon:'<span class="glyphicon glyphicon-link" aria-hidden="true"></span>',link:'a[href*="#"],[data-toggle="anchor"]',margin:20,normalize:!0,onHashchange:!0,onLoad:!0,placement:"auto left",selector:!1,target:!1,template:'<div class="anchor-link" role="tooltip"><a href="#"></a></div>',trigger:{anchor:"hover focus",link:"click"},unique:!0,viewport:{selector:"body",padding:0}}),c.proxy=function(b,c){return c=c||a.fn.tooltip.Constructor,function(){c.prototype[b].apply(this.getDelegate.apply(this,arguments),arguments)}},c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);for(var d=["enter","leave","hide","show","toggle"],e=0,f=d.length;f>e;e++)c.prototype[d[e]]=c.proxy(d[e]);c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),b,this.$element.data()),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getPosition=function(b){return b||this.options.previousContainer?this.options.previousContainer&&(this.options.container=this.options.previousContainer,delete this.options.previousContainer):(this.options.previousContainer=this.options.container,this.options.container=this.$viewport),b||(b=this.getWrapper()),a.fn.tooltip.Constructor.prototype.getPosition.apply(this,[b])},c.prototype.hasContent=function(){return this.id&&this.$anchor&&this.options.icon&&this.options.icon.length},c.prototype.setContent=function(){var a=this,b=this.tip().removeClass("fade in");b.find("a").attr("href","#"+this.id).attr("data-anchor-ignore","true").off("click.bs."+this.type).on("click.bs."+this.type,function(b){b.preventDefault(),b.stopPropagation(),a.scrollTo()}).html(this.options.icon)},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport),this.dom=this.isDOM(),this.$anchor=this.getAnchor(),this.link=this.isLink(),this.id=this.getID();var e=this.getBindSelectors(this.options.selector,">."+this.type+"-wrapper"),f=this.getBindSelectors(this.options.link);if(this.dom){if(!e||!e.length)throw new Error("`selector` option must be specified when initializing "+this.type+" on any top level DOM object!");this.$element=a(document)}var g=this.getExclude(),h=this.dom||!g?this.$element:this.$element.not(g),i=this.getTriggers();for(var j in i)if(i.hasOwnProperty(j))for(var k=i[j]&&"string"==typeof i[j]&&i[j].length&&i[j].split(" ")||[],l=k.length;l--;){var m=k[l];"click"===m?"link"===j?h.on("click.bs."+this.type,f,a.proxy(this.scrollTo,this)):h.on("click.bs."+this.type,e,a.proxy(this.toggle,this)):"link"!==j&&"manual"!==m&&(h.on(("hover"===m?"mouseenter":"focusin")+".bs."+this.type,e,a.proxy(this.enter,this)),h.on(("hover"===m?"mouseleave":"focusout")+".bs."+this.type,e,a.proxy(this.leave,this)))}if(this.dom){this._options=a.extend({},this.options,{trigger:"manual",selector:""}),(this.options.normalize||this.options.generate)&&a(this.options.selector).not(g).anchor(this._options),this.options.onLoad&&("complete"===document.readyState?this.scrollToHash():a(window).on("load.bs."+this.type,a.proxy(this.scrollToHash,this))),this.options.onHashchange&&a(window).on("hashchange.bs."+this.type,a.proxy(this.scrollToHash,this));var n=this;a(window).on("scroll.bs."+this.type,function(){n.scrollTop=n.getPosition(n.$viewport).scroll})}else this.link||(this.id||(this.$anchor=!1),this.$anchor&&(this.options.originalContainer=this.options.container,this.options.container=this.getWrapper()))},c.prototype.getAnchor=function(){if(null!==this.$anchor)return this.$anchor||!1;var b,c=this.$element[0];if(this.isDOM())return!1;if(this.options.target)return b=a(this.options.target).first(),b[0]&&b||!1;if(this.isLink()){var d=c&&"A"===this.$element[0].nodeName&&c.host===window.location.host&&c.pathname===window.location.pathname&&c.search===window.location.search&&c.hash;return d=d&&d.replace(/^#/,"")||d,d&&d.length?(b=a("#"+d+', a[name="'+d+'"]').first(),b[0]&&b||!1):!1}return c&&this.$element||!1},c.prototype.getBindSelectors=function(a,b){if(a=a&&a.split(/\s*,\s*(?![^(]*\))/gi)||!1){var c=[],d=this.getExclude();d=d?":not("+d+")":"";for(var e=0,f=a.length;f>e;e++)c.push(a[e]+d+(b?b:""));a=c.join(",")}return a},c.prototype.getDelegate=function(b,c){if(b instanceof this.constructor)return b;if(!this.isDOM())return this;c=c||b instanceof jQuery.Event&&a(b.currentTarget)||a(),c.is("."+this.type+"-wrapper")&&(c=c.parent(),b.currentTarget&&(b.currentTarget=c[0]));var d=c.data("bs."+this.type);return d||(d=new this.constructor(c[0],this.getDelegateOptions()),c.data("bs."+this.type,d)),d},c.prototype.getExclude=function(){var a=this.options.exclude||!1;return a&&"function"==typeof a&&(a=this.options.exclude.call(this)),a&&"string"!=typeof this.options.exclude&&(a=!1),a},c.prototype.getID=function(b,c){if(this.isDOM())return this.id=this.originalId=!1,this.id;var d="function"==typeof this.options.id||"function"==typeof this.options.originalId;if(null!==this.id&&!d&&!c)return b?this.originalId:this.id;if(this.originalId="function"==typeof this.options.originalId&&this.options.originalId.call(this)||this.options.originalId||!1,this.id="function"==typeof this.options.id&&this.options.id.call(this)||this.options.id||this.originalId||!1,!this.id){var e=this.$element[0],f=e&&e.id||e&&"A"===e.nodeName&&e.name;if(this.options.normalize){if(!this.id&&!this.$element.is("a[name]"))for(var g,h=["next","prev","find"],i=h.length;i--;)if(g=this.$element[h[i]]("a[name]:empty"),g[0]&&!f){f=g[0].id||g[0].name;break}f&&this.$element.attr("data-original-id",f)}f&&this.$element.removeAttr("id"),e&&"A"===e.nodeName&&e.name&&this.$element.removeAttr("name"),this.id=this.originalId=f||!1,this.id||this.link||!this.options.generate||(this.id=this.$element.text().replace(/[\s_.()\[\]{}]/g,"-").replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}).replace(/--+/g,"-").replace(/[^\w-]/gi,"").replace(/^-|-$/g,"").toLowerCase().substring(0,32)||!1,this.id&&this.options.generatePrefix&&(this.id=this.options.generatePrefix+"-"+this.id))}return this.id&&(this.options.unique&&(this.id=this.getUID(this.id)),this.$element.attr("id",this.id),this.id!==this.originalId&&"complete"===document.readyState&&a('[data-spy="scroll"]').scrollspy("refresh")),this.id},c.prototype.getTop=function(){if("fixed"===this.$element.css("position"))return this.$element[0].offsetTop;var a=this.getPosition(this.$element),b=parseInt(this.options.viewport&&this.options.viewport.padding||0,10)||!1;b===!1&&(b=parseInt(this.$viewport.css("padding-top"),10)||!1);var c=a.top;return this.options.margin&&(c-=this.options.margin),b!==!1&&(c-=b),0>c?0:c},c.prototype.getTriggers=function(){var b=this.options.trigger||!1;return b&&"function"==typeof b&&(b=b.call(this)),b&&"string"==typeof b&&(b={anchor:b,link:b}),a.isPlainObject(b)||(b=!1),b},c.prototype.getUID=function(a){for(var b=0,c=a;document.getElementById(a);)b++,a=c+"-"+b;return a},c.prototype.getWrapper=function(){var a=this.$element.find(">."+this.type+"-wrapper");return a[0]?a:this.$element.wrapInner('<span class="'+this.type+'-wrapper">').find(">."+this.type+"-wrapper")},c.prototype.isDOM=function(a){if(!a&&null!==this.dom)return this.dom;var b=this.$element[0];return b&&(b instanceof document.constructor||b instanceof window.constructor||b instanceof HTMLHtmlElement||b instanceof HTMLBodyElement)},c.prototype.isLink=function(a){if(!a&&null!==this.link)return this.link;var b=this.getExclude();return!this.isDOM()&&this.options.link&&this.options.link.length&&b?this.$element.not(b).is(this.options.link):this.$element.is(this.options.link)},c.prototype.scrollTo=function(b){var c=this,d=c.getDelegate.apply(c,arguments),e=a.Event("scroll.bs."+d.type);if(!e.isDefaultPrevented()){if((!d.$anchor||!d.enabled||c.scrolling)&&d.link&&b)return d.$element.trigger("blur.bs."+d.type),void b.preventDefault();if(d.link)return b&&b.preventDefault(),d.$element.trigger("blur.bs."+d.type),void c.scrollTo.apply(c,[null,d.$anchor]);var f=d.getTop(),g=a.Deferred();g.then(function(){d.scrolling=c.scrolling=!0}).then(function(){return d.options.animation&&d.options.duration&&d.options.duration>0?d.$viewport.stop(!0).animate({scrollTop:f},{duration:d.options.duration}).promise():d.$viewport.scrollTop(f).promise()}).then(function(){return d.updateHistory.call(d)}).then(function(){d.scrolling=c.scrolling=!1,d.$element.trigger("focus.bs."+d.type),d.$element.trigger("scrolled.bs."+d.type)}),g.resolve()}},c.prototype.scrollToHash=function(b){if(this.enabled&&!this.scrolling){"complete"===document.readyState&&null!==this.scrollTop&&this.$viewport.scrollTop(this.scrollTop),b=b&&"string"==typeof b&&b.replace(/^#/,"")||window.location.hash.replace(/^#/,"");var c=b&&document.getElementById(b)||document.getElementsByName(b);c&&a(c).anchor("scrollTo")}},c.prototype.updateHistory=function(){var b=this;return a.Deferred(function(c){var d=b.options.history;if("function"==typeof d&&(d=d.call(b)||!1),!d||"append"!==d&&"replace"!==d)return c.resolve();var e=b.getID();b.$element.attr("id","");var f=a('<div id="'+e+'"></div>').css({position:"absolute",visibility:"hidden",top:b.getTop()+"px"}).appendTo(b.$viewport);"replace"===d&&window.history&&window.history.replaceState?window.history.replaceState(null,null,"#"+b.id):window.location.hash=e,f.remove(),b.$element.attr("id",e),setTimeout(function(){c.resolve()},10)})};var g=a.fn.anchor;a.fn.anchor=b,a.fn.anchor.Constructor=c,a.fn.anchor.noConflict=function(){return a.fn.anchor=g,this}}(jQuery);