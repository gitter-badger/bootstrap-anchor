/*!
 * Bootstrap Anchor v0.0.1 (http://markcarver.github.io/bootstrap-anchor/)
 * Copyright 2015 Mark Carver
 * Dual licensed under MIT/GLPv2 (https://github.com/markcarver/bootstrap-anchor/blob/master/LICENSE)
 */
+function(a,b){"use strict";function c(c){var d,f=Array.prototype.slice.call(arguments,1),g=this.selector;return this.each(function(){var b=a(this),h=b.data("bs.anchor"),i="object"==typeof c&&c;h||b.data("bs.anchor",h=new e(this,i,g)),"string"==typeof c&&(d=h[c].apply(h,f))}),1===this.length&&d!==b?d:this}var d=a.fn.tooltip&&a.fn.tooltip.Constructor,e=function(){this.$anchor=null,this.$container=null,this.$delegates=null,this.dom=null,this.enabled=null,this.link=null,this.id=null,this.originalId=null,this.scrollTop=null,this.scrolling=null,this.init.apply(this,arguments)};if(e.VERSION="0.0.1",e.checkVersion=function(a,b){if(!a)return!1;var c,d=a.split("."),e=b.split(".");for(c=0;c<d.length;++c)d[c]=Number(d[c]);for(c=0;c<e.length;++c)e[c]=Number(e[c]);return d[0]>e[0]?!0:d[0]<e[0]?!1:d[1]>e[1]?!0:d[1]<e[1]?!1:d[2]>e[2]?!0:d[2]>=e[2]},!d||!e.checkVersion(d.VERSION,"3.3.4"))throw new Error("Bootstrap Anchor requires the Bootstrap tooltip.js plugin, version 3.3.4 or greater.");e.proxy=function(a,b){return b=b||d,function(){b.prototype[a].apply(this.getInstance.apply(this,arguments),arguments)}},e.DEFAULTS=a.extend({},d.DEFAULTS,{anchors:"h1,h2,h3,h4,[data-anchor]",anchorContainer:!0,anchorDuration:300,anchorFindNamed:!1,anchorGenerateId:!0,anchorHistory:"append",anchorIcon:'<span class="glyphicon glyphicon-link" aria-hidden="true"></span>',anchorIgnore:'[data-anchor-ignore]:not([data-anchor-ignore="false"]),[data-dismiss],[data-slide],[data-toggle]:not([data-toggle="anchor"])',anchorLinks:'a[href*="#"],[data-toggle="anchor"]',anchorNormalizeId:{separator:"-",convertCamel:!0,convertCase:"lower",convert:/[\s_.(){}\[\]]/g,strip:/[^\w-]/gi,singleSeparator:!0,trim:!0,maxLength:32},anchorPrefixId:!1,anchorUniqueId:!0,anchorOffset:20,anchorTarget:!1,scrollOnHashchange:!0,scrollOnLoad:!0,placement:"auto left",template:'<span class="anchor-link text-primary" role="tooltip"><a href="#"></a></span>',trigger:{anchors:"hover focus",links:"click"},viewport:{selector:"body",padding:0}}),e.prototype=a.extend({},d.prototype);for(var f=["enter","leave","hide","show","toggle"],g=0,h=f.length;h>g;g++)e.prototype[f[g]]=e.proxy(f[g]);e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(c,d){var e=this.$element.data()||null,f=this.getDefaults();d=d&&!this.dom&&{anchors:d}||null;var g=!this.dom&&f.anchorContainer;if(e&&e.anchorContainer!==b?g=e.anchorContainer||null:c&&c.anchorContainer!==b&&(g=c.anchorContainer||null),g){var h="string"==typeof g&&a(g);h&&h[0]||(h=this.$element.parent().closest("[data-anchor-container]")),g=h[0]&&h.data()||null}return c=a.extend(!0,{},f,d,c,g,e),c["bs.anchor"]&&delete c["bs.anchor"],c.delay&&"number"==typeof c.delay&&(c.delay={show:c.delay,hide:c.delay}),c},e.prototype.getPosition=function(a){return a||this.options.previousContainer?this.options.previousContainer&&(this.options.container=this.options.previousContainer,delete this.options.previousContainer):(this.options.previousContainer=this.options.container,this.options.container=this.$viewport),a||(a=this.getContainer()),d.prototype.getPosition.apply(this,[a])},e.prototype.hasContent=function(){return!!(!this.isLink()&&this.id&&this.$anchor&&this.$anchor.is(this.options.anchors)&&this.options.anchorIcon)},e.prototype.setContent=function(){var a=this,b=this.tip().removeClass("fade in");b.find("a").attr("href","#"+this.id).off("click.bs."+this.type).on("click.bs."+this.type,function(b){b.preventDefault(),b.stopPropagation(),a.scrollTo()}).html(this.options.anchorIcon)},e.prototype.init=function(b,c,d){if(null===this.enabled){var e=this;if(this.enabled=!0,this.type="anchor",this.dom=this.isDOM(b),this.$element=a(this.dom?document:b),this.options=this.getOptions(c,d),this.$anchor=this.getAnchor(),this.$delegates=!1,this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport),this.link=this.isLink(),this.id=this.getID(),this.dom&&!this.options.anchors&&!this.options.anchorLinks)throw new Error("`anchors` or `anchorLinks` option must be specified when initializing "+this.type+" on any top level DOM object!");var f=this.getExclude();if(this.dom||this.link||this.hasContent()){var g=e.dom||!f?e.$element:e.$element.not(f),h=function(a){var b="anchors"===a?"> ."+e.type+"-wrapper":"",c="anchors"===a&&e.options.anchors||"links"===a&&e.options.anchorLinks||"";if(!e.dom)return b||null;var d=function(a){for(var b=c&&c.split(/\s*,\s*(?![^(]*\))/gi)||[],d=0,f=b.length;f>d;d++)b[d]=a.apply(e,[b[d],b]);return b.join(",")};return d(function(a){return a+":not("+f+")"+b})},i=function(a){a.preventDefault(),a.stopPropagation();var b=this.getInstance.apply(this,arguments);b.scrollTo()},j=this.getTriggers();for(var k in j)if(j.hasOwnProperty(k))for(var l=h(k),m="string"==typeof j[k]&&j[k].split(" ")||[],n=m.length;n--;){var o=m[n];"click"===o?"links"===k&&(this.dom||this.link)?g.on("click.bs."+this.type,l,a.proxy(i,this)):g.on("click.bs."+this.type,l,a.proxy(this.toggle,this)):"anchors"===k&&"manual"!==o&&(g.on(("hover"===o?"mouseenter":"focusin")+".bs."+this.type,l,a.proxy(this.enter,this)),g.on(("hover"===o?"mouseleave":"focusout")+".bs."+this.type,l,a.proxy(this.leave,this)))}}if(this.dom){var p=a(window);this._options=a.extend({},this.options,{trigger:"manual"}),p.on("scroll.bs."+this.type,function(){e.scrollTop=e.getPosition(e.$viewport).scroll});var q=function(){if(e.enabled&&!e.scrolling){"complete"===document.readyState&&null!==e.scrollTop&&e.$viewport.scrollTop(e.scrollTop);var b=window.location.hash.replace(/^#/,""),c=b&&document.getElementById(b)||document.getElementsByName(b);c&&a(c).anchor("scrollTo")}};this.options.scrollOnLoad&&p.on("load.bs."+this.type,q),this.options.scrollOnHashchange&&p.on("hashchange.bs."+this.type,q),a.fn.scrollspy&&this.$element.on("change.bs.anchor",function(){"complete"===document.readyState&&a('[data-spy="scroll"]').scrollspy("refresh")}),a(function(){e.$delegates=a(e.options.anchors).not(f).anchor(e._options)})}else this.link||(this.id||(this.$anchor=!1),this.$anchor&&this.hasContent()&&(this.options.originalContainer=this.options.container,this.options.container=this.getContainer()))}},e.prototype.getAnchor=function(){if(null!==this.$anchor)return this.$anchor||!1;var b,c=this.$element[0];if(this.dom)return!1;if(this.options.anchorTarget)return b=a(this.options.anchorTarget).first(),b[0]&&b||!1;if(this.isLink()){var d=c&&"A"===this.$element[0].nodeName&&c.host===window.location.host&&c.pathname===window.location.pathname&&c.search===window.location.search&&c.hash;return d=d&&d.replace(/^#/,"")||d,d&&d.length?(b=a("#"+d+', a[name="'+d+'"]').first(),b[0]&&b||!1):!1}return c&&this.$element||!1},e.prototype.getContainer=function(){var b=this,c=b.getInstance.apply(b,arguments);if(!c.hasContent()||!c.$anchor)return c.$element;if(c.$container)return c.$container;if(c.$container=c.$anchor.find(">."+c.type+"-wrapper"),c.$container[0])return c.$container;var d=c.$anchor[0],e=document.createElement("span");for(e.className="anchor-wrapper";d.childNodes.length;)e.appendChild(d.removeChild(d.childNodes[0]));return d.insertBefore(e,d.firstChild),c.$container=a(e),c.$container},e.prototype.getInstance=function(b,c){if(b instanceof this.constructor)return b;c=c||b instanceof jQuery.Event&&a(b.currentTarget),c&&c.is("."+this.type+"-wrapper")&&(c=c.parent(),b.currentTarget&&(b.currentTarget=c[0]));var d=c&&c.data("bs."+this.type);return d||c||c[0]||this.dom?(!d&&c&&c[0]&&c.data("bs."+this.type,d=new this.constructor(c[0],this.getDelegateOptions())),d&&d.isLink()&&(d=d.getInstance.apply(d,[null,d.$anchor])),d||this):this.isLink()&&this.$anchor?this.getInstance.apply(this,[null,this.$anchor]):this},e.prototype.getExclude=function(){var a=this.options.anchorIgnore||!1;return a&&"function"==typeof a&&(a=this.options.anchorIgnore.call(this)),a&&"string"!=typeof this.options.anchorIgnore&&(a=!1),a},e.prototype.getID=function(a){var b=this,c=b.getInstance.apply(b,arguments);if(c.dom)return c.id=c.originalId=!1,c.id;var d="function"==typeof c.options.id||"function"==typeof c.options.originalId;if(null!==c.id&&!d&&!a)return c.id;if(c.originalId="function"==typeof c.options.originalId&&c.options.originalId.call(c)||c.options.originalId||!1,c.id="function"==typeof c.options.id&&c.options.id.call(c)||c.options.id||c.originalId||!1,!c.id&&c.$anchor&&c.$anchor[0]){var e=c.$anchor[0],f=e&&e.id||e&&"A"===e.nodeName&&e.name;if(!f&&c.options.anchorFindNamed)for(var g,h=["next","prev","find"],i=h.length;i--;)if(g=c.$anchor[h[i]]("a[name]:empty"),g[0]&&!f){f=g[0].id||g[0].name;break}f&&c.$anchor.removeAttr("id"),e&&"A"===e.nodeName&&e.name&&c.$anchor.removeAttr("name"),c.id=c.originalId=f||!1,c.id||!c.options.anchorGenerateId||c.isLink()||(c.id=c.$anchor.text()||!1,c.id&&(c.options.anchorNormalizeId&&(c.id=c.normalizeId(c.id)),c.options.anchorPrefixId&&(c.id=c.options.anchorPrefixId+"-"+c.id),c.options.anchorUniqueId&&(c.id=c.getUID(c.id)))),c.$anchor.attr("data-original-id",c.originalId.toString()),c.id&&c.$anchor.attr("id",c.id).attr("data-id",c.id)}return c.id!==c.originalId&&c.$anchor&&c.$anchor.trigger("change.bs.anchor",c),c.id},e.prototype.getTop=function(){var a=this,b=a.getInstance.apply(a,arguments),c="fixed"===b.$anchor.css("position")?b.$anchor[0].offsetTop:b.getPosition(b.$anchor).top;return c-=parseInt(b.$viewport.css("margin-top"),10)||0,c-=parseInt(b.$viewport.css("padding-top"),10)||0,b.options.anchorOffset&&(c-=parseInt(b.options.anchorOffset,10)),0>c?0:c},e.prototype.getTriggers=function(){var b=this.options.trigger||!1;return b&&"function"==typeof b&&(b=b.call(this)),b&&"string"==typeof b&&(b={anchors:b,links:b}),a.isPlainObject(b)||(b=!1),b},e.prototype.getUID=function(a){for(var b=0,c=""+a;document.getElementById(a);)b++,a=c+"-"+b;return a},e.prototype.isDOM=function(a,b){return b||null===this.dom?(a=a||this.$element&&this.$element[0],a&&(a instanceof document.constructor||a instanceof window.constructor||a instanceof HTMLHtmlElement||a instanceof HTMLBodyElement)):this.dom},e.prototype.isLink=function(a){if(this.dom)return!1;if(!a&&null!==this.link)return this.link;var b=this.getExclude();return this.options.anchorLinks&&b?this.$element.not(b).is(this.options.anchorLinks):this.$element.is(this.options.anchorLinks)},e.prototype.normalizeId=function(a){var b=this.options.anchorNormalizeId;if(!b||"object"!=typeof b)return a;var c=b.separator||"",d=c&&c.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")||"";return b.convertCamel&&(a=a.replace(/[A-Z]/g,function(a){return c+a})),b.convertCase&&(a="upper"===b.convertCase?a.toUpperCase():a.toLowerCase()),b.convert&&(a=a.replace(b.convert,c)),b.strip&&(a=a.replace(b.strip,"")),b.singleSeparator&&(a=a.replace(new RegExp(d+"+","g"),c)),b.trim&&(a=a.replace(new RegExp("^"+d+"*|"+d+"*$","g"),"")),b.maxLength&&(a=a.substring(0,b.maxLength)),a||!1},e.prototype.scrollTo=function(){var b=this,c=b.getInstance.apply(b,arguments);if(c.$anchor&&a.contains(document,c.$anchor[0])&&c.enabled&&!c.scrolling&&!b.scrolling){var d=a.Event("scroll.bs."+c.type);if(!d.isDefaultPrevented()){var e=c.getTop(),f=a.Deferred();f.then(function(){c.scrolling=b.scrolling=!0}).then(function(){return c.options.animation&&c.options.anchorDuration&&c.options.anchorDuration>0?c.$viewport.stop(!0).animate({scrollTop:e},{anchorDuration:c.options.anchorDuration}).promise():c.$viewport.scrollTop(e).promise()}).then(function(){return a.Deferred(function(b){var d=c.options.anchorHistory;if("function"==typeof d&&(d=d.call(c)||!1),!d||"append"!==d&&"replace"!==d)return b.resolve();var e=c.getID();c.$anchor.attr("id","");var f=a('<div id="'+e+'"></div>').css({position:"absolute",visibility:"hidden",top:c.getTop()+"px"}).appendTo(c.$viewport);"replace"===d&&window.history&&window.history.replaceState?window.history.replaceState(null,null,"#"+c.id):window.location.hash=e,f.remove(),c.$anchor.attr("id",e),setTimeout(function(){b.resolve()},10)})}).then(function(){c.scrolling=b.scrolling=!1,c.$anchor.trigger("focus.bs."+c.type),c.$anchor.trigger("scrolled.bs."+c.type)}),f.resolve()}}};var i=a.fn.anchor;a.fn.anchor=c,a.fn.anchor.Constructor=e,a.fn.anchor.noConflict=function(){return a.fn.anchor=i,this}}(jQuery);